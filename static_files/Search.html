<!DOCTYPE html>
<html>
</script>
    <head>
            <title>Search</title>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <link href="https://fonts.googleapis.com/css?family=Nanum+Gothic" rel="stylesheet">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
            <link rel="stylesheet" type="text/css" href="CSS/Saved.css">
            <link rel="stylesheet" type="text/css" href="CSS/Tile.css">

    </head>
<script src="Javascript/jquery-3.3.1.min.js"></script>

<script type="text/javascript">
    $(document).ready(() => {
        $('#tileList').hide();
        $('#SearchButton').click(async function getResults() {
            let query = $('#SearchBar').val();
            let searchURL = 'https://newsapi.org/v2/everything?' +
            'q=' + query +
            '&apiKey=5f5292f795ff4921b8fe0f9384dd7435';
            let req = new Request(searchURL);
            result = await fetch(req).then(response => response.json());
            setTimeout(function(){
                console.log(result);
                for (i=0; i < 5; i++) {
                    let tileID = 'searchResult' + String(i);
                    let headID = 'resultHeadline' + String(i);
                    let descID = 'resultDesc' + String(i); 
                    if (i >= result.articles.length) {
                        if (i == 0) {
                            $('#'+headID).html('No Results.');
                            $('#'+descID).html('Make sure to type the keyword exactly right!');
                        }
                        else {
                            $('#'+tileID).hide();
                        }
                    }
                    else { 
                        if (result.articles[i].description && result.articles[i].content) {
                            $('#'+headID).html(result.articles[i].title);
                            $('#'+descID).html(result.articles[i].description);
                        }
                    }
                }
                $('#tileList').show();
            }, 200);
        });
    });

    $(window).scroll(function() {
        if ($(this).scrollTop() == 0) {
            $('#banner').css({
                    'box-shadow': 'none',
                    '-moz-box-shadow' : 'none',
                    '-webkit-box-shadow' : 'none' });
            $('#moreButton').css({'display': 'none'});
        }
        else {
            /*filter: drop-shadow(0px 4px 4px #3b3b3b);*/
            $('#banner').css({
                    'box-shadow': '0px 6px 8px #3b3b3b',
                    '-moz-box-shadow' : '0px 6px 8px #3b3b3b',
                    '-webkit-box-shadow' : '0px 6px 8px #3b3b3b' });
            $('#moreButton').css({'display': 'initial'});
        }
    });

    function goBack() {
        window.history.back();
    }

    function trashButton() {
        alert("Article removed from saved");
    }

</script>

<body>

    <!-- Company Name & link on banner  -->
    <div id="banner">
        <a onclick="goBack()" id="buttonLink">
            <img id="button" src="Images/backbutton.png"> 
        </a>
        <h1 id="savedTitle">Search</h1>
    </div>
    <div id="status"></div>

    <center>
    <input type="text" id='SearchBar' placeholder="Search Here!"></input><button id='SearchButton'>Go!</button>
    <ul id="tileList">
        <li id="searchResult0" class="tile">
            <b><div id="resultHeadline0"><p class="savedHeadline">Lorem ipsum dolor sit amet, consectetur adipiscing elit</p></div></b>

            <p class="tileSubTxt" id='resultDesc0'>Lorem ipsum dolor sit amet, consectetur adipiscing elit, 
               sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>

        </li>
        <li id="searchResult1" class="tile">
            <b><div id="resultHeadline1"><p class="savedHeadline">Headline 4</p></div></b>

            <p class="tileSubTxt" id='resultDesc1'>Lorem ipsum dolor sit amet, consectetur adipiscing elit, 
               sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>

        </li>
        <li id="searchResult2" class="tile">
            <b><div id="resultHeadline2"><p class="savedHeadline">Headline 5</p></div></b>

            <p class="tileSubTxt" id='resultDesc2'>Lorem ipsum dolor sit amet, consectetur adipiscing elit, 
               sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>

        </li>
        <li id="searchResult3" class="tile">
            <b><div id="resultHeadline3"><p class="savedHeadline">Headline 5</p></div></b>

            <p class="tileSubTxt" id='resultDesc3'>Lorem ipsum dolor sit amet, consectetur adipiscing elit, 
               sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>

        </li>
        <li id="searchResult4" class="tile">
            <b><div id="resultHeadline4"><p class="savedHeadline">Headline 5</p></div></b>

            <p class="tileSubTxt" id='resultDesc4'>Lorem ipsum dolor sit amet, consectetur adipiscing elit, 
               sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>

        </li>
    </ul>
    </center>
    
</body>

<!-- More -->
<div id="moreButton">
	<a href = "#">
	<img src = "Images/arrow_down.png"
	 width = "50px" height = "50px"
	 alt = "Back to Top" title = "Back to Top">
	</a>
</div>

</html>